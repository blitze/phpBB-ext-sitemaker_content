!function(t,a,e){"use strict";t(e).ready(function(){var e=a.phpbb||{},n=t('textarea[data-bbcode="true"]').focus(function(){a.text_name=t(this).attr("name")});e.plupload.updateBbcode=function(a,r){n.each(function(){function n(t){var a=new RegExp("\\[attachment="+t+"\\](.*?)\\[\\/attachment\\]","g");i=i.replace(a,function(a,e){if(l&&r===t)return"";var n=t+(l?-1:1);return"[attachment="+n+"]"+e+"[/attachment]"})}var o=t(this,e.plupload.form),i=o.val(),l="removal"===a;if(-1!==i.indexOf("[attachment=")){var c;if(l)for(c=r;c<e.plupload.ids.length;c++)n(c);else for(c=e.plupload.ids.length-1;c>=r;c--)n(c);o.val(i)}})},t(".color_palette").each(function(){var a=t(this),n=a.data("orientation"),r=a.data("height"),o=a.data("width");a.html(e.colorPalette(n,o,r))}).filter(":gt(0)").on("click","a",function(){var e=t(this).attr("data-color");a.bbfontstyle("[color=#"+e+"]","[/color]")});var r=t("#preview-detail-panel .toc a, #preview-detail-panel .pagination a").click(function(a){var e=t(this).attr("href").match(/\/(\d+)$/),n=null!==e?e[1]:1;t(".pages").hide(),t("#page-"+n).show(),r.removeClass("current"),n>1?r.filter('[href$="'+n+'"]').addClass("current"):r.filter(".first").addClass("current"),a.preventDefault()})})}(jQuery,window,document);