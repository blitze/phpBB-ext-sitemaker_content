{"version":3,"sources":["acp/content_admin.min.js"],"names":["$","window","document","fNameObj","fLabelObj","typeObj","nTypeObj","containerObj","views","textarea","preview","CodeMirror","postData","trans","Twig","makeOptionsSortable","element","sortable","placeholder","forcePlaceholderSize","disableSelection","addFieldOption","$element","fieldName","attr","substring","ocontainer","itemsCount","children","length","append","twig","ref","render","field_name","type","data","index","toggleFieldOptionDefaultsType","is","find","addField","fieldType","fieldLabel","items","field_data","field","field_type","field_label","getJSON","ajaxUrl","row","accordion","animate","scrollTop","offset","top","setAvailableFields","editField","tObj","nType","val","serializeArray","newRow","replaceWith","removeElement","el","parent","slideUp","remove","buttons","each","label","this","next","toUpperCase","ftype","push","html","join","button","disabled","showTab","tab","panelId","addClass","siblings","removeClass","show","hide","checkRequired","name","buttonObj","missingLabels","trigger","removeAttr","checkField","error1","taken","error2","insertAfter","getEditor","view","fromTextArea","get","theme","mode","lineNumbers","lineWrapping","autoRefresh","styleActiveLine","fixedGutter","indentUnit","indentWithTabs","coverGutterNextToScrollbar","ready","removeObj","aButtons","cButtons","eButtons","fid","id","dialog","cancel","deleteField","autoOpen","width","modal","dialogAdd","click","e","preventDefault","dialogEdit","on","dialogConfirm","hasClass","blur","prev","previousValue","prop","stop","header","active","collapsible","heightStyle","handle","cursor","axis","opacity","event","ui","item","triggerHandler","slideToggle","change","i","getValue","replaceSelection","focus","$loadingIndicator","ajaxStart","phpbb","loadingIndicator","ajaxStop","clearLoadingTimeout","fadeOut","alertTime","jQuery"],"mappings":"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","file":"content_admin.min.js","sourcesContent":["(function($, window, document) {\n\t'use strict';\n\n\tvar fNameObj = {};\n\tvar fLabelObj = {};\n\tvar typeObj = {};\n\tvar nTypeObj = {};\n\tvar containerObj = {};\n\tvar view = 'summary';\n\tvar views = ['summary', 'detail'];\n\tvar textarea = {};\n\tvar preview = {};\n\n\tvar CodeMirror = window.CodeMirror || {};\n\tvar postData = window.postData || {};\n\tvar trans = window.trans || {};\n\tvar Twig = window.Twig || {};\n\n\tvar makeOptionsSortable = function(element) {\n\t\telement.sortable({\n\t\t\tplaceholder: \"ui-state-highlight\",\n\t\t\tforcePlaceholderSize: true\n\t\t}).disableSelection();\n\t};\n\n\tvar addFieldOption = function($element) {\n\t\tvar fieldName = $element.attr('id').substring(11);\n\t\tvar ocontainer = $('#' + fieldName + '-options-container');\n\t\tvar itemsCount = ocontainer.children().length;\n\n\t\tocontainer.append(Twig.twig({ ref: 'option' }).render({\n\t\t\tfield_name: fieldName,\n\t\t\ttype: $element.data('type'),\n\t\t\tindex: itemsCount + 1\n\t\t}));\n\t};\n\n\tvar toggleFieldOptionDefaultsType = function($element) {\n\t\tvar type = $element.is(':checked') ? 'checkbox' : 'radio';\n\t\tvar fieldName = $element.attr('id').substring(13);\n\n\t\t$('#add-option-' + fieldName).data('type', type);\n\t\t$('#' + fieldName + '-options-container')\n\t\t\t.find('.field-defaults')\n\t\t\t\t.attr('type', type);\n\t};\n\n\tvar addField = function(fieldType, fieldName, fieldLabel) {\n\t\tvar items = containerObj.children().length;\n\t\tvar data = {\n\t\t\t'field_data': {\n\t\t\t\t'field': {\n\t\t\t\t\t'field_name': fieldName,\n\t\t\t\t\t'field_type': fieldType,\n\t\t\t\t\t'field_label': fieldLabel\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\t$.getJSON(window.ajaxUrl + '&type=' + fieldType, data, function(row) {\n\t\t\tcontainerObj.append(row).accordion('refresh').accordion('option', 'active', items);\n\t\t\t$('html,body').animate({ scrollTop: $('#cfield-' + fieldName).offset().top }, 500, 'swing');\n\t\t\tmakeOptionsSortable(containerObj.find('#' + fieldName + '-options-container'));\n\t\t\tsetAvailableFields();\n\t\t});\n\t};\n\n\tvar editField = function(field) {\n\t\tvar tObj = $('#' + field + '-field_type');\n\t\tvar el = nTypeObj.children('option:selected');\n\n\t\tvar nType = el.val();\n\t\tvar oType = tObj.val();\n\n\t\tif (oType !== nType) {\n\t\t\tvar row = $('#cfield-' + field);\n\t\t\tvar index = row.index();\n\t\t\tvar data = row.find(':input').serializeArray();\n\n\t\t\t$.getJSON(window.ajaxUrl + '&type=' + nType, data, function(newRow) {\n\t\t\t\trow.replaceWith(newRow);\n\t\t\t\tcontainerObj.accordion('refresh').accordion('option', 'active', index);\n\t\t\t\t$('html,body').animate({ scrollTop: $('#cfield-' + field).offset().top }, 500, 'swing');\n\t\t\t\tsetAvailableFields();\n\t\t\t});\n\t\t}\n\t};\n\n\tvar removeElement = function(el) {\n\t\tel.parent().slideUp('slow').remove();\n\t\treturn false;\n\t};\n\n\tvar setAvailableFields = function() {\n\t\tvar buttons = [];\n\n\t\t$('#fields-container .field_label[value != \"\"]').each(function() {\n\t\t\tvar label = $(this).val();\n\t\t\tvar field = $(this).next().val().toUpperCase();\n\t\t\tvar ftype = $(this).next().next().val();\n\n\t\t\tbuttons.push('<a class=\"button\" href=\"#\" data-tag=\"' + field + '\" data-ftype=\"' + ftype + '\">' + label + '</a>');\n\t\t});\n\n\t\t$('#available-fields').html(buttons.join()).children('.button').button({ disabled: false });\n\t};\n\n\tvar showTab = function(tab) {\n\t\tvar panelId = $(tab).attr('href');\n\t\t$(tab).parent().addClass('activetab').siblings('li').removeClass('activetab');\n\t\t$(panelId).show().siblings().hide();\n\t};\n\n\tvar checkRequired = function() {\n\t\tvar name = $('#content-name').val();\n\t\tvar buttonObj = $('#fieldsubmit');\n\t\tvar missingLabels = 0;\n\n\t\t$('.field_label').each(function() {\n\t\t\tif (!$(this).val().length) {\n\t\t\t\tmissingLabels++;\n\t\t\t}\n\t\t});\n\n\t\tif (missingLabels > 0 || !name) {\n\t\t\tvar tab = (!name) ? 'ctype' : 'cfields';\n\t\t\t$('#content-tabs a[href^=\"#' + tab + '\"]').trigger('click');\n\t\t\tbuttonObj.attr('disabled', 'disabled').removeClass('button1');\n\t\t} else {\n\t\t\tbuttonObj.removeAttr('disabled').addClass('button1');\n\t\t}\n\t};\n\n\tvar checkField = function(fieldName, fieldLabel) {\n\t\t$('#dialog-add-field .error').remove();\n\t\tvar error1 = (!fieldName) ? trans.fieldName : (($('#cfield-' + fieldName).length > 0) ? trans.taken : '');\n\t\tvar error2 = (!fieldLabel) ? trans.fieldLabel : '';\n\n\t\tif (error1) {\n\t\t\t$('<div class=\"error\">' + error1 + '</div>').insertAfter(fNameObj);\n\t\t}\n\n\t\tif (error2) {\n\t\t\t$('<div class=\"error\">' + error2 + '</div>').insertAfter(fLabelObj);\n\t\t}\n\n\t\treturn !!(error1 || error2);\n\t};\n\n\tvar getEditor = function(view) {\n\t\treturn CodeMirror.fromTextArea($('#tpl-custom-' + view).get(0), {\n\t\t\ttheme: 'monokai',\n\t\t\tmode: 'html',\n\t\t\tlineNumbers: true,\n\t\t\tlineWrapping: false,\n\t\t\tautoRefresh: true,\n\t\t\tstyleActiveLine: true,\n\t\t\tfixedGutter: true,\n\t\t\tindentUnit: 4,\n\t\t\tindentWithTabs: true,\n\t\t\tcoverGutterNextToScrollbar: false\n\t\t});\n\t};\n\n\t$(document).ready(function() {\n\t\tvar removeObj = {};\n\t\tvar aButtons = {};\n\t\tvar cButtons = {};\n\t\tvar eButtons = {};\n\t\tvar fid = '';\n\n\t\t// collect all templates\n\t\t$('.tpl').each(function() {\n\t\t\tTwig.twig({\n\t\t\t\tid: $(this).attr('id').substring('14'),\n\t\t\t\tdata: $(this).html()\n\t\t\t});\n\t\t});\n\n\t\tfNameObj = $('#dialog-fieldname');\n\t\tfLabelObj = $('#dialog-fieldlabel');\n\t\ttypeObj = $('#dialog-fieldtype');\n\t\tnTypeObj = $('#dialog-newtype');\n\t\tcontainerObj = $('#fields-container');\n\n\t\taButtons[trans.addField] = function() {\n\t\t\tvar fieldName = fNameObj.val();\n\t\t\tvar fieldType = typeObj.val();\n\t\t\tvar fieldLabel = fLabelObj.val();\n\n\t\t\tif (!checkField(fieldName, fieldLabel)) {\n\t\t\t\taddField(fieldType, fieldName, fieldLabel);\n\t\t\t\tcontainerObj.sortable('refresh');\n\t\t\t\t$(this).dialog('close');\n\t\t\t}\n\t\t};\n\n\t\taButtons[trans.cancel] = function() {\n\t\t\t$(this).dialog('close');\n\t\t};\n\n\t\tcButtons[trans.deleteField] = function() {\n\t\t\tremoveElement(removeObj);\n\t\t\tcontainerObj.sortable('refresh');\n\t\t\t$(this).dialog('close');\n\t\t\tsetAvailableFields();\n\t\t};\n\n\t\tcButtons[trans.cancel] = function() {\n\t\t\t$(this).dialog('close');\n\t\t};\n\n\t\teButtons[trans.editField] = function() {\n\t\t\teditField(fid);\n\t\t\t$(this).dialog('close');\n\t\t};\n\n\t\teButtons[trans.cancel] = function() {\n\t\t\t$(this).dialog('close');\n\t\t};\n\n\t\t$('#dialog-add-field, #dialog-edit-field, #dialog-confirm-delete').dialog({\n\t\t\tautoOpen: false,\n\t\t\twidth: 350,\n\t\t\tmodal: true,\n\t\t\tshow: 'slide',\n\t\t\thide: 'slide'\n\t\t});\n\n\t\tvar dialogAdd = $('#dialog-add-field');\n\t\t$('#add-field').button().click(function(e) {\n\t\t\te.preventDefault();\n\t\t\tfNameObj.val('');\n\t\t\tfLabelObj.val('');\n\t\t\t$('#dialog-add-field .error').remove();\n\n\t\t\tdialogAdd.dialog('option', 'buttons', aButtons);\n\t\t\tdialogAdd.dialog('open');\n\t\t});\n\n\t\tvar dialogEdit = $('#dialog-edit-field');\n\t\tcontainerObj.on('click', 'a.edit-field', function() {\n\t\t\tfid = $(this).data('field');\n\t\t\t$('#dialog-newtype').val($('#' + fid + '-field_type').val());\n\t\t\tdialogEdit.dialog('option', 'buttons', eButtons);\n\t\t\tdialogEdit.dialog('open');\n\t\t});\n\n\t\tvar dialogConfirm = $('#dialog-confirm-delete');\n\t\tcontainerObj.on('click', 'a.remove-field', function(e) {\n\t\t\te.preventDefault();\n\t\t\tremoveObj = $(this).parent();\n\t\t\tif ($(this).hasClass('db-field')) {\n\t\t\t\tdialogConfirm.dialog('option', 'buttons', cButtons);\n\t\t\t\tdialogConfirm.dialog('open');\n\t\t\t} else {\n\t\t\t\tremoveElement(removeObj);\n\t\t\t\tsetAvailableFields();\n\t\t\t}\n\t\t});\n\n\t\tcontainerObj.on('click', 'a.remove-option', function(e) {\n\t\t\tremoveElement($(this));\n\t\t\te.preventDefault();\n\t\t});\n\n\t\tcontainerObj.on('click', 'a.add-option', function(e) {\n\t\t\taddFieldOption($(this));\n\t\t\t$(this).blur();\n\t\t\te.preventDefault();\n\t\t});\n\n\t\tcontainerObj.on('click', 'input.toggle-multi', function() {\n\t\t\ttoggleFieldOptionDefaultsType($(this));\n\t\t});\n\n\t\tcontainerObj.on('blur', '.field_label', function() {\n\t\t\tsetAvailableFields();\n\t\t});\n\n\t\tcontainerObj.on('keyup', '.field-option input[type=\"text\"]', function() {\n\t\t\t$(this).prev().val($(this).val());\n\t\t});\n\n\t\tcontainerObj.on('click', 'input.field-defaults[type=radio]', function() {\n\t\t\t// Credit: http://smoothprogramming.com/jquery/toggle-radio-button-using-jquery/\n\t\t\tvar previousValue = $(this).data('storedValue');\n\t\t\tif (previousValue) {\n\t\t\t\t$(this).prop('checked', !previousValue);\n\t\t\t\t$(this).data('storedValue', !previousValue);\n\t\t\t} else {\n\t\t\t\t$(this).data('storedValue', true);\n\t\t\t\t$(\"input.field-defaults[type=radio]:not(:checked)\").data(\"storedValue\", false);\n\t\t\t}\n\t\t});\n\n\t\tvar stop = false;\n\n\t\tcontainerObj.accordion({\n\t\t\t\theader: '> div > h3',\n\t\t\t\tactive: false,\n\t\t\t\tcollapsible: true,\n\t\t\t\theightStyle: 'content'\n\t\t\t})\n\t\t\t.sortable({\n\t\t\t\thandle: 'h3',\n\t\t\t\tcursor: 'move',\n\t\t\t\taxis: 'y',\n\t\t\t\topacity: 0.6,\n\t\t\t\tforcePlaceholderSize: true,\n\t\t\t\tplaceholder: 'ui-state-highlight',\n\t\t\t\tstop: function(event, ui) {\n\t\t\t\t\t// IE doesn't register the blur when sorting\n\t\t\t\t\t// so trigger focusout handlers to remove .ui-state-focus\n\t\t\t\t\tui.item.children('h3').triggerHandler('focusout');\n\t\t\t\t\tstop = true;\n\t\t\t\t\tsetAvailableFields();\n\t\t\t\t}\n\t\t\t});\n\n\t\tmakeOptionsSortable(containerObj.find('.field-options-list'));\n\n\t\t$('body').on('click', '.toggle', function(e) {\n\t\t\tvar id = $(this).attr('id');\n\t\t\t$('#s' + id).slideToggle();\n\t\t\t$(this).blur();\n\t\t\te.preventDefault();\n\t\t});\n\n\t\t$('.fieldLabel, #content-name').change(function() {\n\t\t\tcheckRequired();\n\t\t});\n\n\t\t$('#fieldsubmit').click(function() {\n\t\t\tcheckRequired();\n\t\t});\n\n\t\t// editor\n\t\t$.each(views, function(i, view) {\n\t\t\tpreview[view] = $('#preview-' + view);\n\t\t\ttextarea[view] = getEditor(view);\n\n\t\t\ttextarea[view].on('change', function() {\n\t\t\t\tpreview[view].html(Twig.twig({ data: textarea[view].getValue() }).render(postData));\n\t\t\t});\n\t\t});\n\n\t\t$('#post-info > a.button').button({ disabled: false }).click(function(e) {\n\t\t\te.preventDefault();\n\t\t\ttextarea[view].replaceSelection('{{ ' + $(this).data('tag') + ' }}');\n\t\t});\n\n\t\t$('#available-fields').on('click', 'a.button', function(e) {\n\t\t\te.preventDefault();\n\t\t\tvar field = '{{ ' + $(this).data('tag').toUpperCase() + ' }}';\n\n\t\t\ttextarea[view].focus();\n\t\t\ttextarea[view].replaceSelection(field);\n\t\t}).children('a.button').button({ disabled: false });\n\n\t\t// Tabs for content type\n\t\t$('.ctab').click(function(e) {\n\t\t\te.preventDefault();\n\t\t\tshowTab(this);\n\t\t});\n\n\t\tvar $loadingIndicator;\n\t\t$(document).ajaxStart(function() {\n\t\t\t$loadingIndicator = window.phpbb.loadingIndicator();\n\t\t}).ajaxStop(function() {\n\t\t\twindow.phpbb.clearLoadingTimeout();\n\t\t\tif ($loadingIndicator) {\n\t\t\t\t$loadingIndicator.fadeOut(window.phpbb.alertTime);\n\t\t\t}\n\t\t});\n\t});\n})(jQuery, window, document);\n"]}