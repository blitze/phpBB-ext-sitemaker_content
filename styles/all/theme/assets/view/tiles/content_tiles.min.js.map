{"version":3,"sources":["view/tiles/content_tiles.min.js"],"names":["$","window","document","undefined","ready","Grid","phpbb","$container","$loadAnchor","on","children","show","imagesLoaded","options","data","context","AwesomeGrid","grid","mobile","tablet","desktop","always","hide","addAjaxCallback","response","$respObj","$items","find","nextUrl","attr","append","apply","parent","jQuery"],"mappings":"CAAA,SAAUA,EAAGC,EAAQC,EAAUC,GAC9B,aAEAH,EAAEE,GAAUE,MAAM,WACjB,IACIC,EADAC,EAAQL,EAAOK,OAAS,GAGxBC,EAAaP,EAAE,4BACfQ,EAAcR,EAAE,mBAAmBS,GAAG,QAAS,WAClDD,EAAYE,SAAS,KAAKC,SAI3BJ,EACEK,aAAa,WAEd,IAAIC,EAAUN,EAAWO,KAAK,YAAc,CAAEC,QAAS,QAAW,GAClEV,EAAO,IAAIW,YAAY,2BAA4BH,GACjDI,KAAK,GACLC,OAAOX,EAAWO,KAAK,mBACvBK,OAAOZ,EAAWO,KAAK,mBACvBM,QAAQb,EAAWO,KAAK,sBAEzBO,OAAO,WACPb,EAAYE,SAAS,KAAKY,SAG5BhB,EAAMiB,gBAAgB,2BAA4B,SAASC,GAC1D,IAAIC,EAAWzB,EAAEwB,GACbE,EAASD,EAASE,KAAK,SACvBC,EAAUH,EAASE,KAAK,mBAAmBE,KAAK,QAEpDH,EACEd,aAAa,WACbL,EAAWuB,OAAOJ,GAClBrB,EAAK0B,aAnCV,IAqCSH,EACHpB,EAAYqB,KAAK,OAAQD,GAEzBpB,EAAYwB,SAASV,SAGtBD,OAAO,WACPb,EAAYE,SAAS,KAAKY,aA5C/B,CAgDGW,OAAQhC,OAAQC","file":"content_tiles.min.js","sourcesContent":["(function($, window, document, undefined) {\n\t\"use strict\";\n\n\t$(document).ready(function() {\n\t\tvar phpbb = window.phpbb || {};\n\t\tvar Grid;\n\n\t\tvar $container = $(\"#sitemaker-content-tiles\");\n\t\tvar $loadAnchor = $(\"#tile-load-more\").on(\"click\", function() {\n\t\t\t$loadAnchor.children(\"i\").show();\n\t\t});\n\n\t\t// layout grid after each image loads\n\t\t$container\n\t\t\t.imagesLoaded(function() {\n\t\t\t/* global AwesomeGrid */\n\t\t\tvar options = $container.data(\"editMode\") ? { context: \"self\" } : {};\n\t\t\tGrid = new AwesomeGrid(\"#sitemaker-content-tiles\", options)\n\t\t\t\t.grid(1)\n\t\t\t\t.mobile($container.data(\"mobile-columns\"))\n\t\t\t\t.tablet($container.data(\"tablet-columns\"))\n\t\t\t\t.desktop($container.data(\"desktop-columns\"));\n\t\t\t})\n\t\t\t.always(function() {\n\t\t\t\t$loadAnchor.children(\"i\").hide();\n\t\t\t});\n\n\t\tphpbb.addAjaxCallback(\"blitze.content.load_more\", function(response) {\n\t\t\tvar $respObj = $(response);\n\t\t\tvar $items = $respObj.find(\".tile\");\n\t\t\tvar nextUrl = $respObj.find(\"#tile-load-more\").attr(\"href\");\n\n\t\t\t$items\n\t\t\t\t.imagesLoaded(function() {\n\t\t\t\t\t$container.append($items);\n\t\t\t\t\tGrid.apply();\n\t\n\t\t\t\t\tif (nextUrl !== undefined) {\n\t\t\t\t\t\t$loadAnchor.attr(\"href\", nextUrl);\n\t\t\t\t\t} else {\n\t\t\t\t\t\t$loadAnchor.parent().hide();\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.always(function() {\n\t\t\t\t\t$loadAnchor.children(\"i\").hide();\n\t\t\t\t});\n\t\t});\n\t});\n})(jQuery, window, document);\n"]}