{"version":3,"sources":["fields/form.min.js"],"names":["responsive_filemanager_callback","field_id","$","trigger","getInfoWindowContent","title","address","updateLocationInfo","fieldName","place","infowindow","$mapFields","val","formatted_address","latitude","geometry","location","lat","longitude","lng","name","setContent","initAutocomplete","map","marker","search","mapType","zoom","setDraggable","geocoder","google","maps","Geocoder","input","autocomplete","places","Autocomplete","addListener","close","setVisible","getPlace","viewport","fitBounds","setCenter","setPosition","open","window","alert","event","getZoom","getMapTypeId","this","latlng","getPosition","panTo","geocode","results","status","GeocoderStatus","OK","request","placeId","place_id","PlacesService","getDetails","PlacesServiceStatus","console","log","initMap","each","attr","substring","data","LatLng","Map","center","tilt","mapTypeId","mapTypeControl","mapTypeControlOptions","mapTypeIds","mapTypes","split","Marker","position","InfoWindow","setTimeout","width","height","document","resizeDatePickerInput","$element","length","adj","parent","ready","tinycolor","cache","options","palette","showPalette","rows","replace","i","str","push","trim","spectrum","extend","hideAfterPaletteSelect","preferredFormat","showButtons","css","current","minDate","Date","maxDate","language","dpLang","onSelect","fd","d","picker","el","dp","datepicker","selected","dateStr","selectDate","fn","ionRangeSlider","change","imgSrc","fieldId","html","next","fancybox","autoScale","type","jQuery"],"mappings":"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","file":"form.min.js","sourcesContent":["// Responsive Filemanager callback\nfunction responsive_filemanager_callback(field_id) {\n\t'use strict';\n\t/* global $ */\n\t$('#' + field_id).trigger('change');\n}\n\n/*\n * Initialize Google Map with marker\n */\nvar google = window.google;\nvar $mapFields = {};\n\nfunction getInfoWindowContent(title, address) {\n\t'use strict';\n\n\treturn (title ? '<h4>' + title + '</h4>' : '') + address;\n}\n\nfunction updateLocationInfo(fieldName, place, infowindow) {\n\t'use strict';\n\n\t$mapFields[fieldName].address.val(place.formatted_address);\n\t$mapFields[fieldName].latitude.val(place.geometry.location.lat);\n\t$mapFields[fieldName].longitude.val(place.geometry.location.lng);\n\t$mapFields[fieldName].place.val(place.name);\n\n\tinfowindow.setContent(getInfoWindowContent(place.name, place.formatted_address));\n}\n\nfunction initAutocomplete(fieldName, map, marker, infowindow) {\n\t'use strict';\n\n\t$mapFields[fieldName] = {\n\t\t'map': $('#map-' + fieldName),\n\t\t'search': $('#search-' + fieldName),\n\t\t'address': $('#' + fieldName + '-address'),\n\t\t'latitude': $('#' + fieldName + '-latitude'),\n\t\t'longitude': $('#' + fieldName + '-longitude'),\n\t\t'place': $('#' + fieldName + '-place'),\n\t\t'mapType': $('#' + fieldName + '-map-type'),\n\t\t'zoom': $('#' + fieldName + '-zoom')\n\t};\n\n\tmarker.setDraggable(true);\n\n\tvar geocoder = new google.maps.Geocoder();\n\tvar input = $mapFields[fieldName].search[0];\n\tvar autocomplete = new google.maps.places.Autocomplete(input);\n\n\t// Listen for the event fired when the user selects a prediction and retrieve\n\t// more details for that place.\n\tautocomplete.addListener('place_changed', function() {\n\t\tinfowindow.close();\n\t\tmarker.setVisible(false);\n\t\tvar place = autocomplete.getPlace();\n\t\tif (!place.geometry) {\n\t\t\t// User entered the name of a Place that was not suggested and\n\t\t\t// pressed the Enter key, or the Place Details request failed.\n\t\t\twindow.alert(\"No details available for input: '\" + place.name + \"'\");\n\t\t\treturn;\n\t\t}\n\n\t\t// If the place has a geometry, then present it on a map.\n\t\tif (place.geometry.viewport) {\n\t\t\tmap.fitBounds(place.geometry.viewport);\n\t\t} else {\n\t\t\tmap.setCenter(place.geometry.location);\n\t\t}\n\t\tmarker.setPosition(place.geometry.location);\n\t\tmarker.setVisible(true);\n\n\t\tupdateLocationInfo(fieldName, place, infowindow);\n\t\tinfowindow.open(map, marker);\n\t});\n\n\t// event to capture zoom level\n\tgoogle.maps.event.addListener(map, 'zoom_changed', function() {\n\t\t$mapFields[fieldName].zoom.val(map.getZoom());\n\t});\n\n\t// event to capture map type\n\tgoogle.maps.event.addListener(map, 'maptypeid_changed', function() {\n\t\t$mapFields[fieldName].mapType.val(map.getMapTypeId());\n\t});\n\n\t//Add listener to marker for reverse geocoding\n\tgoogle.maps.event.addListener(marker, \"dragend\", function() {\n\t\tvar marker = this;\n\t\tvar latlng = this.getPosition();\n\t\tmap.panTo(latlng);\n\t\tgeocoder.geocode({ 'location': latlng }, function(results, status) {\n\t\t\tif (status === google.maps.GeocoderStatus.OK) {\n\t\t\t\tif (results[0]) {\n\t\t\t\t\tmap.setCenter(results[0].geometry.location);\n\t\t\t\t\tmarker.setPosition(results[0].geometry.location);\n\n\t\t\t\t\tvar request = {\n\t\t\t\t\t\tplaceId: results[0].place_id\n\t\t\t\t\t};\n\n\t\t\t\t\tvar service = new google.maps.places.PlacesService(map);\n\t\t\t\t\tservice.getDetails(request, function(place, status) {\n\t\t\t\t\t\tif (status === google.maps.places.PlacesServiceStatus.OK) {\n\t\t\t\t\t\t\tconsole.log(place);\n\t\t\t\t\t\t\tupdateLocationInfo(fieldName, place, infowindow);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\twindow.alert('No results found');\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\twindow.alert('Geocoder failed due to: ' + status);\n\t\t\t}\n\t\t});\n\t});\n}\n\nfunction initMap() {\n\t'use strict';\n\n\t$('.location-map').each(function() {\n\t\tvar fieldName = $(this).attr('id').substring(4);\n\t\tvar data = $(this).data();\n\n\t\tvar latlng = new google.maps.LatLng(data.latitude, data.longitude);\n\t\tvar map = new google.maps.Map(this, {\n\t\t\tzoom: data.zoom || 16,\n\t\t\tcenter: latlng,\n\t\t\ttilt: 45,\n\t\t\tmapTypeId: data.mapType,\n\t\t\tmapTypeControl: true,\n\t\t\tmapTypeControlOptions: {\n\t\t\t\tmapTypeIds: data.mapTypes.split(',')\n\t\t\t}\n\t\t});\n\n\t\tvar marker = new google.maps.Marker({\n\t\t\tmap: map,\n\t\t\ttitle: data.place,\n\t\t\tposition: latlng\n\t\t});\n\n\t\tvar infowindow = new google.maps.InfoWindow();\n\n\t\tif (data.address) {\n\t\t\tinfowindow.setContent(getInfoWindowContent(data.place, data.address));\n\t\t\tsetTimeout(function() {\n\t\t\t\tinfowindow.open(map, marker);\n\t\t\t}, 500);\n\t\t}\n\n\t\tmarker.addListener('click', function() {\n\t\t\tif ($mapFields[fieldName].address.val()) {\n\t\t\t\tinfowindow.open(map, marker);\n\t\t\t}\n\t\t});\n\n\t\t$(this).width(data.width).height(data.height);\n\n\t\tif (data.autocomplete) {\n\t\t\tinitAutocomplete(fieldName, map, marker, infowindow);\n\t\t}\n\t});\n}\n\n(function($, window, document) {\n\t'use strict';\n\n\t/**\n\t * Resize datepicker input field to appropriate size for picker type\n\t */\n\tfunction resizeDatePickerInput($element) {\n\t\tvar width = $element.val().length || 20;\n\t\tvar adj = $element.data('range') || $element.data('multiple-dates') || 1;\n\t\t$element.parent().width(width + (adj * 6) + '%');\n\t}\n\n\t$(document).ready(function() {\n\n\t\t/**\n\t\t * Color Picker\n\t\t */\n\t\tif (window.tinycolor) {\n\t\t\tvar cache = {};\n\t\t\t$('.colorpicker').each(function() {\n\t\t\t\tvar options = $(this).data();\n\n\t\t\t\tif (options.palette) {\n\t\t\t\t\toptions.showPalette = true;\n\t\t\t\t\tif (cache[options.palette]) {\n\t\t\t\t\t\toptions.palette = cache[options.palette];\n\t\t\t\t\t} else {\n\t\t\t\t\t\tvar rows = options.palette.replace(/ /g, '').split(\"\\n\");\n\n\t\t\t\t\t\tvar palette = [];\n\t\t\t\t\t\t$.each(rows, function(i, str) {\n\t\t\t\t\t\t\tpalette.push(str.trim().split(','));\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tcache[options.palette] = palette;\n\t\t\t\t\t\toptions.palette = palette;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t$(this).spectrum($.extend(options, {\n\t\t\t\t\thideAfterPaletteSelect: true,\n\t\t\t\t\tpreferredFormat: 'hex',\n\t\t\t\t\tshowButtons: false\n\t\t\t\t}));\n\t\t\t});\n\n\t\t\t// overwrite prosilver's fieldset field1 margin-bottom: 3px\n\t\t\t$('.sp-replacer div').css('marginBottom', 0);\n\t\t}\n\n\t\t/**\n\t\t * Datetime picker\n\t\t */\n\t\t$('.datetimepicker').each(function() {\n\t\t\tvar options = $(this).data();\n\t\t\tvar current = $(this).val();\n\n\t\t\toptions = $.extend(options, {\n\t\t\t\tminDate: (options.minDate) ? new Date(options.minDate) : '',\n\t\t\t\tmaxDate: (options.maxDate) ? new Date(options.maxDate) : '',\n\t\t\t\tlanguage: window.dpLang || {},\n\t\t\t\tonSelect: function(fd, d, picker) {\n\t\t\t\t\tresizeDatePickerInput($(picker.el));\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tvar dp = $(this).datepicker(options).data('datepicker');\n\t\t\tresizeDatePickerInput($(this));\n\n\t\t\tif (current) {\n\t\t\t\tvar selected = [];\n\t\t\t\t$.each(current.split(','), function(i, dateStr) {\n\t\t\t\t\tselected.push(new Date(dateStr));\n\t\t\t\t});\n\t\t\t\tdp.selectDate(selected);\n\t\t\t}\n\t\t});\n\n\t\t/**\n\t\t * Range picker\n\t\t */\n\t\tif (typeof $.fn.ionRangeSlider !== 'undefined') {\n\t\t\t$('.rangepicker').ionRangeSlider();\n\t\t}\n\n\t\t/**\n\t\t * Image field\n\t\t */\n\t\t$('.image-field').change(function() {\n\t\t\t\tvar imgSrc = $(this).val();\n\t\t\t\tvar fieldId = $(this).attr('name');\n\n\t\t\t\t$('#preview-' + fieldId).html(imgSrc.length ? '<img src=' + imgSrc + ' />' : '');\n\t\t\t})\n\t\t\t.next()\n\t\t\t.fancybox({\n\t\t\t\t'width': 900,\n\t\t\t\t'height': 600,\n\t\t\t\t'autoScale': false,\n\t\t\t\t'type': 'iframe'\n\t\t\t});\n\t});\n})(jQuery, window, document);\n"]}