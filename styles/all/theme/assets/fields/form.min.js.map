{"version":3,"sources":["fields/form.min.js"],"names":["responsive_filemanager_callback","field_id","$","trigger","google","window","$mapFields","getInfoWindowContent","title","address","updateLocationInfo","fieldName","place","infowindow","val","name","formatted_address","latitude","geometry","location","lat","longitude","lng","setContent","initAutocomplete","map","marker","search","mapType","zoom","setDraggable","geocoder","maps","Geocoder","input","autocomplete","places","Autocomplete","addListener","close","setVisible","getPlace","viewport","fitBounds","setCenter","setPosition","open","alert","event","getZoom","getMapTypeId","this","latlng","getPosition","panTo","geocode","results","status","GeocoderStatus","OK","request","placeId","place_id","PlacesService","getDetails","PlacesServiceStatus","initMap","each","attr","substring","data","LatLng","Map","center","tilt","mapTypeId","mapTypeControl","mapTypeControlOptions","mapTypeIds","mapTypes","split","Marker","position","InfoWindow","setTimeout","width","height","document","resizeDatePickerInput","$element","length","adj","parent","ready","tinycolor","cache","options","palette","showPalette","rows","replace","i","str","push","trim","spectrum","extend","hideAfterPaletteSelect","allowEmpty","showInitial","showInput","showButtons","preferredFormat","css","current","minDate","Date","maxDate","language","dpLang","onSelect","fd","d","picker","el","dp","datepicker","selected","dateStr","selectDate","fn","ionRangeSlider","change","imgSrc","fieldId","html","jQuery"],"mappings":"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","file":"form.min.js","sourcesContent":["// Responsive Filemanager callback\nfunction responsive_filemanager_callback(field_id) { // jshint ignore:line\n\t'use strict';\n\t/* global $ */\n\t$('#' + field_id).trigger('change');\n}\n\n/*\n * Initialize Google Map with marker\n */\nvar google = window.google;\nvar $mapFields = {};\n\nfunction getInfoWindowContent(title, address) {\n\t'use strict';\n\n\treturn (title ? '<h4>' + title + '</h4>' : '') + address;\n}\n\nfunction updateLocationInfo(fieldName, place, infowindow) {\n\t'use strict';\n\n\t$mapFields[fieldName].place.val(place.name);\n\t$mapFields[fieldName].address.val(place.formatted_address);\n\t$mapFields[fieldName].latitude.val(place.geometry.location.lat);\n\t$mapFields[fieldName].longitude.val(place.geometry.location.lng);\n\n\tinfowindow.setContent(getInfoWindowContent(place.name, place.formatted_address));\n}\n\nfunction initAutocomplete(fieldName, map, marker, infowindow) {\n\t'use strict';\n\n\t$mapFields[fieldName] = {\n\t\t'map': $('#map-' + fieldName),\n\t\t'search': $('#search-' + fieldName),\n\t\t'address': $('#' + fieldName + '-address'),\n\t\t'latitude': $('#' + fieldName + '-latitude'),\n\t\t'longitude': $('#' + fieldName + '-longitude'),\n\t\t'place': $('#' + fieldName + '-place'),\n\t\t'mapType': $('#' + fieldName + '-map-type'),\n\t\t'zoom': $('#' + fieldName + '-zoom')\n\t};\n\n\tmarker.setDraggable(true);\n\n\tvar geocoder = new google.maps.Geocoder();\n\tvar input = $mapFields[fieldName].search[0];\n\tvar autocomplete = new google.maps.places.Autocomplete(input);\n\n\t// Listen for the event fired when the user selects a prediction and retrieve\n\t// more details for that place.\n\tautocomplete.addListener('place_changed', function() {\n\t\tinfowindow.close();\n\t\tmarker.setVisible(false);\n\t\tvar place = autocomplete.getPlace();\n\t\tif (!place.geometry) {\n\t\t\t// User entered the name of a Place that was not suggested and\n\t\t\t// pressed the Enter key, or the Place Details request failed.\n\t\t\twindow.alert(\"No details available for input: '\" + place.name + \"'\");\n\t\t\treturn;\n\t\t}\n\n\t\t// If the place has a geometry, then present it on a map.\n\t\tif (place.geometry.viewport) {\n\t\t\tmap.fitBounds(place.geometry.viewport);\n\t\t} else {\n\t\t\tmap.setCenter(place.geometry.location);\n\t\t}\n\t\tmarker.setPosition(place.geometry.location);\n\t\tmarker.setVisible(true);\n\n\t\tupdateLocationInfo(fieldName, place, infowindow);\n\t\tinfowindow.open(map, marker);\n\t});\n\n\t// event to capture zoom level\n\tgoogle.maps.event.addListener(map, 'zoom_changed', function() {\n\t\t$mapFields[fieldName].zoom.val(map.getZoom());\n\t});\n\n\t// event to capture map type\n\tgoogle.maps.event.addListener(map, 'maptypeid_changed', function() {\n\t\t$mapFields[fieldName].mapType.val(map.getMapTypeId());\n\t});\n\n\t//Add listener to marker for reverse geocoding\n\tgoogle.maps.event.addListener(marker, \"dragend\", function() {\n\t\tvar marker = this;\n\t\tvar latlng = this.getPosition();\n\t\tmap.panTo(latlng);\n\t\tgeocoder.geocode({ 'location': latlng }, function(results, status) {\n\t\t\tif (status === google.maps.GeocoderStatus.OK) {\n\t\t\t\tif (results[0]) {\n\t\t\t\t\tmap.setCenter(results[0].geometry.location);\n\t\t\t\t\tmarker.setPosition(results[0].geometry.location);\n\n\t\t\t\t\tvar request = {\n\t\t\t\t\t\tplaceId: results[0].place_id\n\t\t\t\t\t};\n\n\t\t\t\t\tvar service = new google.maps.places.PlacesService(map);\n\t\t\t\t\tservice.getDetails(request, function(place, status) {\n\t\t\t\t\t\tif (status === google.maps.places.PlacesServiceStatus.OK) {\n\t\t\t\t\t\t\tupdateLocationInfo(fieldName, place, infowindow);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\twindow.alert('No results found');\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\twindow.alert('Geocoder failed due to: ' + status);\n\t\t\t}\n\t\t});\n\t});\n}\n\nfunction initMap() { // jshint ignore:line\n\t'use strict';\n\n\t$('.location-map').each(function() {\n\t\tvar fieldName = $(this).attr('id').substring(4);\n\t\tvar data = $(this).data();\n\n\t\tvar latlng = new google.maps.LatLng(data.latitude, data.longitude);\n\t\tvar map = new google.maps.Map(this, {\n\t\t\tzoom: data.zoom || 0,\n\t\t\tcenter: latlng,\n\t\t\ttilt: 45,\n\t\t\tmapTypeId: data.mapType || 'roadmap',\n\t\t\tmapTypeControl: true,\n\t\t\tmapTypeControlOptions: {\n\t\t\t\tmapTypeIds: data.mapTypes.split(',')\n\t\t\t}\n\t\t});\n\n\t\tvar marker = new google.maps.Marker({\n\t\t\tmap: map,\n\t\t\ttitle: data.place,\n\t\t\tposition: latlng\n\t\t});\n\n\t\tvar infowindow = new google.maps.InfoWindow();\n\n\t\tif (data.address) {\n\t\t\tinfowindow.setContent(getInfoWindowContent(data.place, data.address));\n\t\t\tsetTimeout(function() {\n\t\t\t\tinfowindow.open(map, marker);\n\t\t\t}, 500);\n\t\t}\n\n\t\tmarker.addListener('click', function() {\n\t\t\tif ($mapFields[fieldName].address.val()) {\n\t\t\t\tinfowindow.open(map, marker);\n\t\t\t}\n\t\t});\n\n\t\t$(this).width(data.width).height(data.height);\n\n\t\tif (data.autocomplete) {\n\t\t\tinitAutocomplete(fieldName, map, marker, infowindow);\n\t\t}\n\t});\n}\n\n(function($, window, document) {\n\t'use strict';\n\n\t/**\n\t * Resize datepicker input field to appropriate size for picker type\n\t */\n\tfunction resizeDatePickerInput($element) {\n\t\tvar width = $element.val().length || 15;\n\t\tvar adj = $element.data('range') || $element.data('multiple-dates') || 1;\n\t\t$element.parent().width(width + (adj * 6) + '%');\n\t}\n\n\t$(document).ready(function() {\n\n\t\t/**\n\t\t * Color Picker\n\t\t */\n\t\tif (window.tinycolor) {\n\t\t\tvar cache = {};\n\t\t\t$('.colorpicker').each(function() {\n\t\t\t\tvar options = $(this).data();\n\n\t\t\t\tif (options.palette) {\n\t\t\t\t\toptions.showPalette = true;\n\t\t\t\t\tif (cache[options.palette]) {\n\t\t\t\t\t\toptions.palette = cache[options.palette];\n\t\t\t\t\t} else {\n\t\t\t\t\t\tvar rows = options.palette.replace(/ /g, '').split(\"\\n\");\n\n\t\t\t\t\t\tvar palette = [];\n\t\t\t\t\t\t$.each(rows, function(i, str) {\n\t\t\t\t\t\t\tpalette.push(str.trim().split(','));\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tcache[options.palette] = palette;\n\t\t\t\t\t\toptions.palette = palette;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t$(this).spectrum($.extend(options, {\n\t\t\t\t\thideAfterPaletteSelect: true,\n\t\t\t\t\tallowEmpty:true,\n    \t\t\t\tshowInitial: true,\n    \t\t\t\tshowInput: true,\n\t\t\t\t\tshowButtons: false,\n\t\t\t\t\tpreferredFormat: 'hex'\n\t\t\t\t}));\n\t\t\t});\n\n\t\t\t// overwrite prosilver's fieldset field1 margin-bottom: 3px\n\t\t\t$('.sp-replacer div').css('marginBottom', 0);\n\t\t}\n\n\t\t/**\n\t\t * Datetime picker\n\t\t */\n\t\t$('.datetimepicker').each(function() {\n\t\t\tvar options = $(this).data();\n\t\t\tvar current = $(this).val();\n\n\t\t\toptions = $.extend(options, {\n\t\t\t\tminDate: (options.minDate) ? new Date(options.minDate) : '',\n\t\t\t\tmaxDate: (options.maxDate) ? new Date(options.maxDate) : '',\n\t\t\t\tlanguage: window.dpLang || {},\n\t\t\t\tonSelect: function(fd, d, picker) {\n\t\t\t\t\tresizeDatePickerInput($(picker.el));\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tvar dp = $(this).datepicker(options).data('datepicker');\n\t\t\tresizeDatePickerInput($(this));\n\n\t\t\tif (current) {\n\t\t\t\tvar selected = [];\n\t\t\t\t$.each(current.split(','), function(i, dateStr) {\n\t\t\t\t\tselected.push(new Date(dateStr));\n\t\t\t\t});\n\t\t\t\tdp.selectDate(selected);\n\t\t\t}\n\t\t});\n\n\t\t/**\n\t\t * Range picker\n\t\t */\n\t\tif (typeof $.fn.ionRangeSlider !== 'undefined') {\n\t\t\t$('.rangepicker').ionRangeSlider();\n\t\t}\n\n\t\t/**\n\t\t * Image field\n\t\t */\n\t\t$('.image-field').each(function() {\n\t\t\t$(this).change(function() {\n\t\t\t\tvar imgSrc = $(this).val();\n\t\t\t\tvar fieldId = $(this).attr('name');\n\n\t\t\t\t$('#preview-' + fieldId).html(imgSrc.length ? '<img src=' + imgSrc + ' />' : '');\n\t\t\t});\n\t\t});\n\t});\n})(jQuery, window, document);\n"]}