parameters:
    tables.blitze.content_types: %core.table_prefix%sm_content_types
    tables.blitze.content_fields: %core.table_prefix%sm_content_fields

imports:
    - { resource: views.yml }
    - { resource: blocks.yml }
    - { resource: form.yml }

services:

    blitze.content.comments:
        class: blitze\content\services\comments
        arguments:
            - @auth
            - @config
            - @content.visibility
            - @dbal.conn
            - @controller.helper
            - @pagination
            - @request
            - @template
            - @user
            - @blitze.content.form
            - @blitze.sitemaker.forum.data
            - %core.root_path%
            - %core.php_ext%

    blitze.content.display.controller:
        class: blitze\content\controller\display
        arguments:
            - @auth
            - @config
            - @dbal.conn
            - @controller.helper
            - @pagination
            - @service_container
            - @template
            - @user
            - @blitze.content.displayer
            - @blitze.sitemaker.forum.data
            - %core.root_path%
            - %core.php_ext%

    blitze.content.displayer:
        class: blitze\content\services\displayer
        arguments:
            - @auth
            - @cache
            - @config
            - @content.visibility
            - @dbal.conn
            - @controller.helper
            - @service_container
            - @template
            - @user
            - @blitze.content.comments
            - @blitze.content.form
            - %core.root_path%
            - %tables.blitze.content_fields%
            - %tables.blitze.content_types%

    blitze.content.form:
        class: blitze\content\services\form
        arguments:
            - @auth
            - @config
            - @request
            - @blitze.content.form.fields_collection
            - @template_context
            - @user
            - @blitze.sitemaker.template
            - %core.root_path%
            - %core.php_ext%

    blitze.content.form.fields_collection:
        class: phpbb\di\service_collection
        arguments:
            - @service_container
        tags:
            - { name: service_collection, tag: form.field }

    blitze.content.listener:
        class: blitze\content\event\listener
        arguments:
            - @config
            - @dbal.conn
            - @controller.helper
            - @user
            - @blitze.content.types
            - @blitze.content.displayer
            - %core.root_path%
            - %core.php_ext%
        tags:
            - { name: event.listener }

    blitze.content.loader:
        class: blitze\content\services\template_loader
        arguments:
            - @blitze.content.types

    blitze.content.manager:
        class: blitze\content\services\manager
        arguments:
            - @auth
            - @cache
            - @config
            - @content.visibility
            - @dbal.conn
            - @controller.helper
            - @pagination
            - @service_container
            - @request
            - @template
            - @user
            - @blitze.content.comments
            - @blitze.content.displayer
            - @blitze.content.form
            - @blitze.sitemaker.forum.data
            - %core.root_path%
            - %core.php_ext%

    blitze.content.types:
        class: blitze\content\services\types
        arguments:
            - @cache
            - @config
            - @dbal.conn
            - %tables.blitze.content_fields%
            - %tables.blitze.content_types%

    blitze.content.views_collection:
        class: phpbb\di\service_collection
        arguments:
            - @service_container
        tags:
            - { name: service_collection, tag: content.view }